<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é«˜å´é§… ARæ¡ˆå†…ï¼ˆã‚µãƒãƒ¼ãƒˆå†™çœŸï¼‹æ¡ˆå†…æ–‡ä»˜ãï¼‰</title>
<style>
body { margin:0; overflow:hidden; font-family:"Segoe UI",sans-serif; color:white; text-align:center; }
video#camera, #bgImage { position: fixed; top:0; left:0; width:100vw; height:100vh; object-fit:cover; z-index:0; }
#bgImage { background: url("https://upload.wikimedia.org/wikipedia/commons/3/3f/Takasaki_Station_concourse.jpg") center/cover; opacity:0.35; z-index:1; }
#overlay { position: fixed; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:2; cursor:pointer; }
#arrow { font-size:100px; animation:pulse 1.2s infinite; }
@keyframes pulse { 0%{opacity:0.7; transform:scale(1);}50%{opacity:1; transform:scale(1.2);}100%{opacity:0.7; transform:scale(1);} }
#textBox { background: rgba(0,0,0,0.6); padding:10px 20px; border-radius:10px; font-size:20px; margin-top:10px; }
#menu { position:fixed; top:10px; left:50%; transform:translateX(-50%); z-index:3; background: rgba(30,30,30,0.8); padding:10px; border-radius:10px; display:flex; gap:8px; align-items:center; }
button { background:#2196f3; color:white; border:none; padding:6px 12px; border-radius:6px; cursor:pointer; }
button:hover { background:#0b7dda; }
#hintPhoto { position:fixed; top:10px; right:10px; width:100px; height:80px; border:2px solid white; border-radius:6px; display:none; z-index:4; cursor:pointer; }
#hintText { position:fixed; top:95px; right:10px; font-size:12px; color:white; background: rgba(0,0,0,0.5); padding:2px 5px; border-radius:4px; display:none; z-index:4; pointer-events:none; }
</style>
</head>
<body>

<video id="camera" autoplay playsinline muted></video>
<div id="bgImage"></div>

<div id="menu">
  <select id="routeSelect">
    <option value="">ãƒ«ãƒ¼ãƒˆã‚’é¸æŠ</option>
    <option value="7ç•ªç·šâ†’ä¸Šä¿¡é›»é‰„">åœ¨æ¥ç·š7ç•ªç·š â†’ ä¸Šä¿¡é›»é‰„</option>
    <option value="ä¸Šä¿¡é›»é‰„â†’6ç•ªç·š">ä¸Šä¿¡é›»é‰„ â†’ åœ¨æ¥ç·š6ç•ªç·š</option>
    <option value="è¥¿å£â†’4ç•ªç·š">è¥¿å£ â†’ åœ¨æ¥ç·š4ç•ªç·š</option>
    <option value="æ±å£â†’é«˜å´OPA">æ±å£ â†’ é«˜å´OPA</option>
  </select>
  <button onclick="startRoute()">æ¡ˆå†…é–‹å§‹</button>
  <button onclick="resetRoute()">ãƒªã‚»ãƒƒãƒˆ</button>
</div>

<img id="hintPhoto" src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Takasaki_Station_concourse.jpg/200px-Takasaki_Station_concourse.jpg" alt="ã‚µãƒãƒ¼ãƒˆå†™çœŸ">
<div id="hintText">ã“ã®å ´æ‰€ä»˜è¿‘ã«æ¥ãŸã‚‰ã‚¯ãƒªãƒƒã‚¯</div>

<div id="overlay">
  <div id="arrow">ğŸ—ºï¸</div>
  <div id="textBox">ãƒ«ãƒ¼ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„</div>
</div>

<script>
// ãƒ«ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆhint:true ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å³ä¸Šå†™çœŸè¡¨ç¤ºï¼‰
const routes = {
  "7ç•ªç·šâ†’ä¸Šä¿¡é›»é‰„": [
    { text:"7ç•ªç·šãƒ›ãƒ¼ãƒ ã‚’å‡ºç™º", arrow:"â¬†ï¸", hint:true },
    { text:"ã‚³ãƒ³ã‚³ãƒ¼ã‚¹ã‚’å·¦ã¸", arrow:"â¬…ï¸", hint:true },
    { text:"ä¸Šä¿¡é›»é‰„æ”¹æœ­ã«åˆ°ç€", arrow:"âœ…", hint:false }
  ],
  "ä¸Šä¿¡é›»é‰„â†’6ç•ªç·š": [
    { text:"ä¸Šä¿¡é›»é‰„æ”¹æœ­ã‚’å‡ºã‚‹", arrow:"â¬†ï¸", hint:true },
    { text:"å·¦ã«é€²ã‚€", arrow:"â¬…ï¸", hint:true },
    { text:"åœ¨æ¥ç·šæ”¹æœ­ã‚’é€šé", arrow:"ğŸš‰", hint:false },
    { text:"6ç•ªç·šãƒ›ãƒ¼ãƒ ã«åˆ°ç€", arrow:"âœ…", hint:false }
  ],
  "è¥¿å£â†’4ç•ªç·š": [
    { text:"è¥¿å£ã‚’å‡ºç™º", arrow:"â¬†ï¸", hint:true },
    { text:"å³ã¸é€²ã‚€", arrow:"â¡ï¸", hint:true },
    { text:"4ç•ªç·šãƒ›ãƒ¼ãƒ ã«åˆ°ç€", arrow:"âœ…", hint:false }
  ],
  "æ±å£â†’é«˜å´OPA": [
    { text:"æ±å£ãƒ­ãƒ¼ã‚¿ãƒªãƒ¼ã‚’å‡ºç™º", arrow:"â¬†ï¸", hint:true },
    { text:"æ¨ªæ–­æ­©é“ã‚’æ¸¡ã‚‹", arrow:"â¡ï¸", hint:true },
    { text:"é«˜å´OPAæ­£é¢å…¥å£ã«åˆ°ç€", arrow:"âœ…", hint:false }
  ]
};

let currentRoute = [];
let currentStep = 0;

// ã‚«ãƒ¡ãƒ©èµ·å‹•
(async()=>{
  try{
    const stream = await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}});
    document.getElementById("camera").srcObject = stream;
  } catch(e){
    alert("ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã§ãã¾ã›ã‚“: "+e.message);
  }
})();

// ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º
function showStep(){
  if(currentRoute.length===0) return;
  const s = currentRoute[currentStep];
  document.getElementById("arrow").textContent = s.arrow;
  document.getElementById("textBox").textContent = s.text;

  const hintPhoto = document.getElementById("hintPhoto");
  const hintText = document.getElementById("hintText");
  if(s.hint){
    hintPhoto.style.display = "block";
    hintText.style.display = "block";
  } else {
    hintPhoto.style.display = "none";
    hintText.style.display = "none";
  }
}

// ãƒ«ãƒ¼ãƒˆé–‹å§‹
function startRoute(){
  const name = document.getElementById("routeSelect").value;
  if(!name) return alert("ãƒ«ãƒ¼ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„");
  currentRoute = routes[name];
  currentStep = 0;
  showStep();
}

// ãƒªã‚»ãƒƒãƒˆ
function resetRoute(){
  currentRoute = [];
  currentStep = 0;
  document.getElementById("arrow").textContent = "ğŸ—ºï¸";
  document.getElementById("textBox").textContent = "ãƒ«ãƒ¼ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„";
  document.getElementById("hintPhoto").style.display = "none";
  document.getElementById("hintText").style.display = "none";
}

// ç”»é¢ã‚¯ãƒªãƒƒã‚¯ã§æ¬¡ã‚¹ãƒ†ãƒƒãƒ—
document.getElementById("overlay").addEventListener("click",()=>{
  if(currentRoute.length===0) return;
  if(currentStep < currentRoute.length-1){
    currentStep++;
    showStep();
  } else {
    alert("æ¡ˆå†…å®Œäº†ï¼");
  }
});

// ãƒ’ãƒ³ãƒˆå†™çœŸã‚¯ãƒªãƒƒã‚¯ã§ã‚‚æ¬¡ã‚¹ãƒ†ãƒƒãƒ—
document.getElementById("hintPhoto").addEventListener("click",()=>{
  if(currentRoute.length===0) return;
  if(currentStep < currentRoute.length-1){
    currentStep++;
    showStep();
  } else {
    alert("æ¡ˆå†…å®Œäº†ï¼");
  }
});
</script>
</body>
</html>
